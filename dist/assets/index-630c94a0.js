import{s as k,J as y,j as t,b as m,l as D,m as b,u as S,o as C,p as L,L as M}from"./index-2782feee.js";import{u as v,i as E,c as T,d as F,e as B,f as O,g as z,h as G,r as l}from"./echarts-63d4abac.js";import{A as I,N as $,a as N,b as R,G as Y,c as J,d as U,M as W,T as _,F as q,B as u,e as H,S as K}from"./authorStyledComponents-3067073a.js";import{u as P}from"./useIntersectionObserver-a0a17442.js";import"./react-router-dom-50fe5a57.js";import"./zrender-1584b751.js";v([E,T,F,B,O]);const Q=k.div`
  height: 160px;
  width: 270px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
  border: 1px solid teal;
  z-index: 0;
`;function w({chartData:r,chartTitle:e}){const s=y(),o={animationDuration:2e3,height:"20%",grid:{show:!1},xAxis:{type:"category",show:!1,splitLine:{show:!1},showGrid:!1,axisLine:{show:!1},axisTick:{show:!1},data:[...Object.keys(r)]},yAxis:{type:"value",show:!1,splitLine:{show:!1},showGrid:!1,axisLine:{show:!1},axisTick:{show:!1}},tooltip:{trigger:"axis"},series:[{data:[...Object.values(r)],type:"line",showSymbol:!1}],title:{text:e,textStyle:{color:s.main.color,fontSize:"11px",fontWeight:"normal",fontFamily:"Fuzzy Bubbles"}}};return t.jsx(Q,{children:t.jsx(z,{option:o,echarts:G,notMerge:!0,lazyUpdate:!0})})}function V(r){let e={},s=new Date;s.setDate(s.getDate()-30),e[`${s.getMonth()+1}-${s.getDate()}`]=0;for(let a=30;a>0;a--)s.setDate(s.getDate()+1),e[`${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`]=0;const o=Object.keys(e);return r.forEach(a=>{var i;const n=(i=a.f4)==null?void 0:i.slice(5,10);o.includes(n)&&(e[n]+=1)}),e}function X(r){let e={};const s=new Date().getFullYear(),o=new Date().getMonth()+1;for(let a=s-1;a<=s;a++)for(let n=1;n<=12&&!(a===s&&n>o);n++)e[`${a}-${n}`]=0;return r.forEach(a=>{const n=`${new Date(a.f4).getFullYear()}-${new Date(a.f4).getMonth()+1}`;e[n]+=1}),e}const Z=l.memo(function({author:e}){var s;return t.jsxs(I,{children:[t.jsx($,{children:e.name}),t.jsxs(N,{children:[e.count," ",e.count===1?"članak":[2,3,4].includes(e.count)?"članka":"članaka"]}),e.count!=="0"&&t.jsxs(R,{children:[t.jsxs(Y,{children:[t.jsx(w,{chartData:V(e.articles),chartTitle:"Broj novih članaka u prošlih mesec dana"}),t.jsx(w,{chartData:X(e.articles),chartTitle:"Broj novih članaka u prošlih godinu dana"})]}),t.jsx($,{children:"Članci:"}),t.jsx(J,{children:(s=e.articles)==null?void 0:s.map(o=>t.jsx(U,{to:`/articles/${o.f1}`,children:o.f2},o.f1))})]})]})}),f=5;function ie(){const r=m(D),[e,s]=l.useState(0),[o,a]=l.useState("&order=name,asc"),n=o.split(",")[0].split("=")[1],[i,h]=l.useState("desc"),x=l.useRef(null),p=P(x),[g,j]=l.useState(!1),A=m(b),c=S();return l.useEffect(()=>{p&&!g&&s(d=>d+f)},[p,g]),l.useEffect(()=>{e-f>r.length?j(!0):j(!1)},[e,r.length]),l.useEffect(()=>{e===r.length&&c(C(`?pagination=${e},${f}${o}`))},[e,c,r.length,o,i]),l.useEffect(()=>{c(L()),s(0),window.scrollTo({top:0,behavior:"smooth"})},[c,o,i]),t.jsxs(W,{children:[t.jsx(_,{children:"Autori članaka"}),t.jsxs(q,{children:[t.jsxs(u,{$selected:n==="name",onClick:()=>{a(`&order=name,${i}`),h(i==="asc"?"desc":"asc")},children:["Abecedno"," ",n==="name"?i==="desc"?"⇡":"⇣":""]}),t.jsxs(u,{$selected:n==="count",onClick:()=>{a(`&order=count,${i}`),h(i==="asc"?"desc":"asc")},children:["Broj članaka"," ",n==="count"?i==="desc"?"⇡":"⇣":""]}),t.jsxs(u,{$selected:n==="id",onClick:()=>{h(i==="asc"?"desc":"asc"),a(`&order=id,${i}`)},children:["Najnoviji"," ",n==="id"?i==="desc"?"⇡":"⇣":""]})]}),t.jsx(H,{children:r.map(d=>t.jsx(Z,{author:d},d.id))}),t.jsx(K,{ref:x,children:A&&t.jsx(M,{})})]})}export{ie as default};
